ğŸ“± Violence Prevention App (VP San Diego)
Backend (FastAPI + SQLite) + Mobile App (Expo React Native)
This project is an MVP for a violence-prevention and outreach app designed for real-world use by intervention teams in San Diego.
It has three core modules:
Hotspots â€” Identify rising risk areas (based on uploaded CSV incident data)
Triage â€” Outreach follow-up queue (urgency-based)
Screening â€” Simple routing tool for safety concerns
All parts run locally using free tools (no Docker required).

vpsd/
â”‚
â”œâ”€â”€ backend/                # FastAPI backend + SQLite database
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ db.py
â”‚   â”œâ”€â”€ models.py
â”‚   â”œâ”€â”€ ingest.py
â”‚   â”œâ”€â”€ hotspots.py
â”‚   â”œâ”€â”€ init_db.py
â”‚   â””â”€â”€ vpsd.db            # SQLite DB (auto-created)
â”‚
â”œâ”€â”€ mobile/
â”‚   â””â”€â”€ vpsd-mobile/        # Expo React Native app
â”‚       â”œâ”€â”€ App.js
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ config.js   # API base URL (critical)
â”‚       â”‚   â””â”€â”€ screens/    # Hotspots, Triage, Screening
â”‚       â””â”€â”€ package.json
â”‚
â””â”€â”€ README.md               # This file

ğŸš€ Getting the Project Running Again (Quick Start)
Whenever you come back after time off, do these steps:
1ï¸âƒ£ Start the Backend (FastAPI)
Open terminal inside VS Code:

cd backend
source .venv/bin/activate
uvicorn main:app --reload --host 0.0.0.0 --port 8000

Test backend:
Open in browser:
http://localhost:8000/health

You should see:
{"status":"ok"}
If yes â†’ backend is running.


2ï¸âƒ£ Start the Mobile App (Expo)

Open a NEW terminal in VS Code:
cd mobile/vpsd-mobile
npm start
This opens the Expo developer console and shows a QR code.

View on your phone:
iPhone â†’ open Camera app â†’ scan QR â†’ tap the link
Android â†’ open Expo Go app â†’ scan QR
The app will load instantly.


3ï¸âƒ£ Make Sure Phone â†’ Backend Works
Since phones canâ€™t reach localhost, the app must use your computerâ€™s LAN IP.

Get your computerâ€™s IP:
ipconfig getifaddr en0
Example:
192.168.1.20

Update mobile config:
Edit:
mobile/vpsd-mobile/src/config.js
Set:
export const API_BASE = "http://YOUR_IP_HERE:8000";
Replace YOUR_IP_HERE with your actual IP.
Restart both backend + mobile app.


ğŸ”¥ Core Features (How to Use)

â–¶ï¸ Hotspots
Upload incident CSV using a tool like Postman / Thunder Client
Run computation via the app
See â€œTop Rising Areasâ€ on your phone

â–¶ï¸ Triage
In the app, go to Triage
Press Seed Demo (creates a test client)
Press Load Queue
Youâ€™ll see a list of clients sorted by urgency.

â–¶ï¸ Screening
Go to Screening
Enter notes
The backend checks for escalation keywords
(e.g., â€œgunâ€, â€œsuicideâ€, â€œkill myselfâ€)

ğŸ”§ If Something Breaks, Check These
âŒ App loads but shows no data
Fix the API URL inside src/config.js:
export const API_BASE = "http://<your IP>:8000";
Make sure the backend is running with:
uvicorn main:app --reload --host 0.0.0.0 --port 8000

âŒ â€œNetwork request failedâ€
Common causes:
Phone and laptop are not on same Wi-Fi
Firewall blocking port 8000
Backend not running
Wrong IP in config.js

âŒ Expo wonâ€™t load
Stop and restart:
npm start
Then press:
r      // reload
w      // open in browser
ğŸ›  Useful Commands
Create venv (only needed once)
python3 -m venv .venv
Activate venv
source .venv/bin/activate
Install backend deps
pip install -r requirements.txt
Install mobile deps
npm install

ğŸ“¦ Resetting or Wiping the DB
If you want a clean database:
rm backend/vpsd.db
cd backend
python init_db.py

ğŸ§± Future Upgrades (when you come back later)
Add maps to Hotspots screen
Add login system for outreach staff
Add cloud database (Postgres)
Build a production mobile release with Expo EAS
Integrate real SD data sources (Calls for Service, SANDAG, etc.)
Add push notifications
Deploy backend to render.com or fly.io